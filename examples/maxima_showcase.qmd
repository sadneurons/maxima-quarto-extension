---
title: "Maxima Showcase"
format:
  pdf:
    toc: true
    number-sections: true
execute:
  echo: true
header-includes:
  - \usepackage{listings}
  - \usepackage{xcolor}
  - \usepackage{tcolorbox}
  - \newtcolorbox{qmdchunk}{colback=gray!10,colframe=gray!10,boxrule=0pt,arc=0pt,boxsep=4pt}
  - \lstdefinelanguage{maxima}{
      keywords={load,draw2d,draw3d,plot2d,plot3d,integrate,diff,solve,expand,factor,simplify,trigsimp,radcan,fullratsimp,trigreduce,tex,mathml},
      sensitive=true,
      morecomment=[l]{/*},
      morecomment=[l]{//},
      morestring=[b]{"}
    }
  - \lstset{
      basicstyle=\ttfamily\small,
      keywordstyle=\color{blue},
      commentstyle=\color{gray},
      stringstyle=\color{teal},
      showstringspaces=false,
      breaklines=true,
      frame=none,
      backgroundcolor=\color{gray!10}
    }
---

```{r}
#| include: false
source("../_extensions/maxima/knitr-engine.R")
```

# Overview

This document is a single, end-to-end showcase of the Maxima knitr engine: symbolic math, precision control, session persistence, code generation, and polished 2D/3D visuals.

## Build Notes

Prerequisites:

- Maxima on `PATH`
- `gnuplot` installed (for default plotting backend)
- Maxima `draw` package available (for `draw2d` / `draw3d`)
- LaTeX engine for PDF output

If you hit `luaotfload` cache errors while rendering, use:

```bash
TEXMFVAR=/tmp/texmf-var TEXMFCACHE=/tmp/texmf-cache quarto render maxima_showcase.qmd --to pdf
```

# Symbolic Core

## Exact Calculus

Chunk with options:

```{=latex}
\begin{qmdchunk}
\texttt{\string`\string`\string`\{maxima\}}\\
\begin{verbatim}
#| tex: true
#| results: asis
integrate(x^4 * sin(x), x);
\end{verbatim}
\texttt{\string`\string`\string`}\\
\end{qmdchunk}
```

```{maxima}
#| tex: true
#| results: asis
integrate(x^4 * sin(x), x);
```

## Simplification Pipeline

Chunk with options:

```{=latex}
\begin{qmdchunk}
\texttt{\string`\string`\string`\{maxima\}}\\
\begin{verbatim}
#| tex: true
#| results: asis
#| trigsimp: true
sin(x)^2 + cos(x)^2;
\end{verbatim}
\texttt{\string`\string`\string`}\\
\end{qmdchunk}
```

```{maxima}
#| tex: true
#| results: asis
#| trigsimp: true
sin(x)^2 + cos(x)^2;
```

# Precision Control

Chunk with options:

```{=latex}
\begin{qmdchunk}
\texttt{\string`\string`\string`\{maxima\}}\\
\begin{verbatim}
#| bfloat: true
#| fpprec: 80
#| tex: true
#| results: asis
sqrt(2) + %pi/7;
\end{verbatim}
\texttt{\string`\string`\string`}\\
\end{qmdchunk}
```

```{maxima}
#| bfloat: true
#| fpprec: 80
#| tex: true
#| results: asis
sqrt(2) + %pi/7;
```

# Sessions and Linear Algebra

Chunk with options:

```{=latex}
\begin{qmdchunk}
\texttt{\string`\string`\string`\{maxima\}}\\
\begin{verbatim}
#| session: true
#| results: hide
#| tex: true
A: matrix([1,2,3],[4,5,6],[7,8,9]);
B: matrix([2,-1,0],[-1,2,-1],[0,-1,2]);
\end{verbatim}
\texttt{\string`\string`\string`}\\
\end{qmdchunk}
```

```{maxima}
#| session: true
#| results: hide
#| tex: true
A: matrix([1,2,3],[4,5,6],[7,8,9]);
B: matrix([2,-1,0],[-1,2,-1],[0,-1,2]);
```

Chunk with options:

```{=latex}
\begin{qmdchunk}
\texttt{\string`\string`\string`\{maxima\}}\\
\begin{verbatim}
#| session: true
#| tex: true
#| results: asis
A . B;
\end{verbatim}
\texttt{\string`\string`\string`}\\
\end{qmdchunk}
```

```{maxima}
#| session: true
#| tex: true
#| results: asis
A . B;
```

# Code Generation

Chunk with options:

```{=latex}
\begin{qmdchunk}
\texttt{\string`\string`\string`\{maxima\}}\\
\begin{verbatim}
#| format: "c"
#| results: markup
#| echo: true
#| tex: true
integrate(x^3 * exp(-x), x);
\end{verbatim}
\texttt{\string`\string`\string`}\\
\end{qmdchunk}
```

```{maxima}
#| format: "c"
#| results: markup
#| echo: true
#| tex: true
integrate(x^3 * exp(-x), x);
```

# 2D Plot Gallery

## Gnuplot: Curves and Styling

Chunk with options:

```{=latex}
\begin{qmdchunk}
\texttt{\string`\string`\string`\{maxima\}}\\
\begin{verbatim}
#| plot: true
#| label: fig-gnuplot-curves
#| fig.dev: pdf
#| fig-cap: "Sine and cosine with dense sampling"
#| plot_width: 1200
#| plot_height: 700
#| out.width: "90%"
plot2d([sin(x), cos(x)], [x, -2*%pi, 2*%pi], [nticks, 20]);
\end{verbatim}
\texttt{\string`\string`\string`}\\
\end{qmdchunk}
```

```{maxima}
#| plot: true
#| label: fig-gnuplot-curves
#| fig.dev: pdf
#| fig-cap: "Sine and cosine with dense sampling"
#| plot_width: 1200
#| plot_height: 700
#| out.width: "90%"
plot2d([sin(x), cos(x)], [x, -2*%pi, 2*%pi], [nticks, 20]);
```

## Draw: Custom Colors and Layers

Chunk with options:

```{=latex}
\begin{qmdchunk}
\texttt{\string`\string`\string`\{maxima\}}\\
\begin{verbatim}
#| plot: true
#| label: fig-draw-2d
#| plot_backend: draw
#| fig.dev: pdf
#| fig-cap: "Draw: layered curves with grid and title"
#| plot_width: 1200
#| plot_height: 700
#| out.width: "90%"
load("draw");
draw2d(
  title = "Harmonics",
  grid = true,
  color = red,
  explicit(sin(x), x, -2*%pi, 2*%pi),
  color = blue,
  explicit(sin(2*x)/2, x, -2*%pi, 2*%pi),
  color = dark_green,
  explicit(sin(3*x)/3, x, -2*%pi, 2*%pi)
);
\end{verbatim}
\texttt{\string`\string`\string`}\\
\end{qmdchunk}
```

```{maxima}
#| plot: true
#| label: fig-draw-2d
#| plot_backend: draw
#| fig.dev: pdf
#| fig-cap: "Draw: layered curves with grid and title"
#| plot_width: 1200
#| plot_height: 700
#| out.width: "90%"
load("draw");
draw2d(
  title = "Harmonics",
  grid = true,
  color = red,
  explicit(sin(x), x, -2*%pi, 2*%pi),
  color = blue,
  explicit(sin(2*x)/2, x, -2*%pi, 2*%pi),
  color = dark_green,
  explicit(sin(3*x)/3, x, -2*%pi, 2*%pi)
);
```

# 3D Plot Gallery

## Gnuplot: Surface Plot

Chunk with options:

```{=latex}
\begin{qmdchunk}
\texttt{\string`\string`\string`\{maxima\}}\\
\begin{verbatim}
#| plot: true
#| label: fig-gnuplot-surface
#| fig.dev: pdf
#| fig-cap: "Surface: sin(r)/r"
#| plot_width: 1200
#| plot_height: 800
#| out.width: "90%"
plot3d(sin(sqrt(x^2 + y^2))/sqrt(x^2 + y^2), [x, -8, 8], [y, -8, 8], [grid, 50, 50]);
\end{verbatim}
\texttt{\string`\string`\string`}\\
\end{qmdchunk}
```

```{maxima}
#| plot: true
#| label: fig-gnuplot-surface
#| fig.dev: pdf
#| fig-cap: "Surface: sin(r)/r"
#| plot_width: 1200
#| plot_height: 800
#| out.width: "90%"
plot3d(sin(sqrt(x^2 + y^2))/sqrt(x^2 + y^2), [x, -8, 8], [y, -8, 8], [grid, 50, 50]);
```

## Draw3D: Parametric Torus

Chunk with options:

```{=latex}
\begin{qmdchunk}
\texttt{\string`\string`\string`\{maxima\}}\\
\begin{verbatim}
#| plot: true
#| label: fig-draw-torus
#| plot_backend: draw
#| fig.dev: pdf
#| fig-cap: "Draw3D: parametric torus"
#| plot_width: 1200
#| plot_height: 800
#| out.width: "90%"
load("draw");
R: 3; r: 1;
draw3d(
  title = "Torus",
  surface_hide = true,
  color = cyan,
  parametric_surface(
    (R + r*cos(v))*cos(u),
    (R + r*cos(v))*sin(u),
    r*sin(v),
    u, 0, 2*%pi,
    v, 0, 2*%pi
  )
);
\end{verbatim}
\texttt{\string`\string`\string`}\\
\end{qmdchunk}
```

```{maxima}
#| plot: true
#| label: fig-draw-torus
#| plot_backend: draw
#| fig.dev: pdf
#| fig-cap: "Draw3D: parametric torus"
#| plot_width: 1200
#| plot_height: 800
#| out.width: "90%"
load("draw");
R: 3; r: 1;
draw3d(
  title = "Torus",
  surface_hide = true,
  color = cyan,
  parametric_surface(
    (R + r*cos(v))*cos(u),
    (R + r*cos(v))*sin(u),
    r*sin(v),
    u, 0, 2*%pi,
    v, 0, 2*%pi
  )
);
```

## Draw3D: Spiral Sheet

Chunk with options:

```{=latex}
\begin{qmdchunk}
\texttt{\string`\string`\string`\{maxima\}}\\
\begin{verbatim}
#| plot: true
#| label: fig-draw-spiral
#| plot_backend: draw
#| fig.dev: pdf
#| fig-cap: "Draw3D: spiral sheet"
#| plot_width: 1200
#| plot_height: 800
#| out.width: "90%"
load("draw");
draw3d(
  title = "Spiral Sheet",
  surface_hide = true,
  color = orange,
  explicit(z = x*sin(y), x, -4, 4, y, -4, 4)
);
\end{verbatim}
\texttt{\string`\string`\string`}\\
\end{qmdchunk}
```

```{maxima}
#| plot: true
#| label: fig-draw-spiral
#| plot_backend: draw
#| fig.dev: pdf
#| fig-cap: "Draw3D: spiral sheet"
#| plot_width: 1200
#| plot_height: 800
#| out.width: "90%"
load("draw");
draw3d(
  title = "Spiral Sheet",
  surface_hide = true,
  color = orange,
  explicit(z = x*sin(y), x, -4, 4, y, -4, 4)
);
```


# Advanced Capabilities

## Equation Solving

Chunk with options:

```{=latex}
\begin{qmdchunk}
\texttt{\string`\string`\string`\{maxima\}}\\
\begin{verbatim}
#| tex: true
#| results: asis
solve([2*x + y = 5, x - y = 1], [x, y]);
\end{verbatim}
\texttt{\string`\string`\string`}\\
\end{qmdchunk}
```

```{maxima}
#| tex: true
#| results: asis
solve([2*x + y = 5, x - y = 1], [x, y]);
```

## Series Expansion

Chunk with options:

```{=latex}
\begin{qmdchunk}
\texttt{\string`\string`\string`\{maxima\}}\\
\begin{verbatim}
#| tex: true
#| results: asis
taylor(sin(x)/x, x, 0, 8);
\end{verbatim}
\texttt{\string`\string`\string`}\\
\end{qmdchunk}
```

```{maxima}
#| tex: true
#| results: asis
taylor(sin(x)/x, x, 0, 8);
```

## Laplace Transform

Chunk with options:

```{=latex}
\begin{qmdchunk}
\texttt{\string`\string`\string`\{maxima\}}\\
\begin{verbatim}
#| tex: true
#| results: asis
laplace(sin(2*t), t, s);
\end{verbatim}
\texttt{\string`\string`\string`}\\
\end{qmdchunk}
```

```{maxima}
#| tex: true
#| results: asis
laplace(sin(2*t), t, s);
```

## Matrix Eigenvalues

Chunk with options:

```{=latex}
\begin{qmdchunk}
\texttt{\string`\string`\string`\{maxima\}}\\
\begin{verbatim}
#| load: "eigen"
#| tex: true
#| results: asis
M: matrix([1,2,3],[2,5,6],[3,6,9]);
eigenvalues(M);
\end{verbatim}
\texttt{\string`\string`\string`}\\
\end{qmdchunk}
```

```{maxima}
#| load: "eigen"
#| tex: true
#| results: asis
M: matrix([1,2,3],[2,5,6],[3,6,9]);
eigenvalues(M);
```

## Parametric Curve (2D)

Chunk with options:

```{=latex}
\begin{qmdchunk}
\texttt{\string`\string`\string`\{maxima\}}\\
\begin{verbatim}
#| plot: true
#| label: fig-parametric
#| plot_backend: draw
#| fig.dev: pdf
#| fig-cap: "Parametric Lissajous curve"
#| plot_width: 1000
#| plot_height: 600
#| out.width: "85%"
load("draw");
draw2d(
  title = "Lissajous",
  grid = true,
  color = navy,
  parametric(sin(3*t), sin(4*t), t, 0, 2*%pi)
);
\end{verbatim}
\texttt{\string`\string`\string`}\\
\end{qmdchunk}
```

```{maxima}
#| plot: true
#| label: fig-parametric
#| plot_backend: draw
#| fig.dev: pdf
#| fig-cap: "Parametric Lissajous curve"
#| plot_width: 1000
#| plot_height: 600
#| out.width: "85%"
load("draw");
draw2d(
  title = "Lissajous",
  grid = true,
  color = navy,
  parametric(sin(3*t), sin(4*t), t, 0, 2*%pi)
);
```

## Implicit Curve (2D)

Chunk with options:

```{=latex}
\begin{qmdchunk}
\texttt{\string`\string`\string`\{maxima\}}\\
\begin{verbatim}
#| plot: true
#| label: fig-implicit
#| plot_backend: draw
#| fig.dev: pdf
#| fig-cap: "Implicit curve: lemniscate"
#| plot_width: 1000
#| plot_height: 600
#| out.width: "85%"
load("draw");
draw2d(
  title = "Lemniscate",
  grid = true,
  color = dark_green,
  implicit(x^4 + y^4 - 1, x, -1.5, 1.5, y, -1.5, 1.5)
);
\end{verbatim}
\texttt{\string`\string`\string`}\\
\end{qmdchunk}
```

```{maxima}
#| plot: true
#| label: fig-implicit
#| plot_backend: draw
#| fig.dev: pdf
#| fig-cap: "Implicit curve: lemniscate"
#| plot_width: 1000
#| plot_height: 600
#| out.width: "85%"
load("draw");
draw2d(
  title = "Lemniscate",
  grid = true,
  color = dark_green,
  implicit(x^4 + y^4 - 1, x, -1.5, 1.5, y, -1.5, 1.5)
);
```

## Polar Plot (2D)

Chunk with options:

```{=latex}
\begin{qmdchunk}
\texttt{\string`\string`\string`\{maxima\}}\\
\begin{verbatim}
#| plot: true
#| label: fig-polar
#| plot_backend: draw
#| fig.dev: pdf
#| fig-cap: "Polar rose"
#| plot_width: 1000
#| plot_height: 600
#| out.width: "85%"
load("draw");
draw2d(
  title = "Polar Rose",
  grid = true,
  color = magenta,
  polar(1 + 0.5*cos(4*theta), theta, 0, 2*%pi)
);
\end{verbatim}
\texttt{\string`\string`\string`}\\
\end{qmdchunk}
```

```{maxima}
#| plot: true
#| label: fig-polar
#| plot_backend: draw
#| fig.dev: pdf
#| fig-cap: "Polar rose"
#| plot_width: 1000
#| plot_height: 600
#| out.width: "85%"
load("draw");
draw2d(
  title = "Polar Rose",
  grid = true,
  color = magenta,
  polar(1 + 0.5*cos(4*theta), theta, 0, 2*%pi)
);
```

# Output Control Showcase

## Hold Figures Until End

Chunk with options:

```{=latex}
\begin{qmdchunk}
\texttt{\string`\string`\string`\{maxima\}}\\
\begin{verbatim}
#| plot: true
#| label: fig-hold-1
#| fig.show: hold
#| fig.dev: pdf
#| fig-cap: "Hold: first"
#| plot_width: 900
#| plot_height: 600
plot2d(sin(x), [x, 0, 2*%pi]);
\end{verbatim}
\texttt{\string`\string`\string`}\\
\end{qmdchunk}
```

```{maxima}
#| plot: true
#| label: fig-hold-1
#| fig.show: hold
#| fig.dev: pdf
#| fig-cap: "Hold: first"
#| plot_width: 900
#| plot_height: 600
plot2d(sin(x), [x, 0, 2*%pi]);
```

Chunk with options:

```{=latex}
\begin{qmdchunk}
\texttt{\string`\string`\string`\{maxima\}}\\
\begin{verbatim}
#| plot: true
#| label: fig-hold-2
#| fig.show: hold
#| fig.dev: pdf
#| fig-cap: "Hold: second"
#| plot_width: 900
#| plot_height: 600
plot2d(cos(x), [x, 0, 2*%pi]);
\end{verbatim}
\texttt{\string`\string`\string`}\\
\end{qmdchunk}
```

```{maxima}
#| plot: true
#| label: fig-hold-2
#| fig.show: hold
#| fig.dev: pdf
#| fig-cap: "Hold: second"
#| plot_width: 900
#| plot_height: 600
plot2d(cos(x), [x, 0, 2*%pi]);
```

# Finish

This single document is intended as the canonical example for release documentation and screenshots.
